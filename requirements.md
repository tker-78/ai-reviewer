

# ドキュメントレビューアプリケーション 要件整理（改訂版）

## 目的
	•	部署内で利用できるドキュメントレビューアプリケーションを開発し、課長・部長レベルのレビュー観点を自動化。
	•	初期段階ではクラウドLLM（Vertex AI）を活用し、将来的にはローカルLLM（Ollama + LoRAモデル）へ移行可能な構成を目指す。

⸻

## ユースケース
	•	ユーザーがUIから文書をアップロード。
	•	「課長視点」（誤字脱字・形式チェック）、「部長視点」（論理構成・内容精査）など、複数ロールでのレビュー結果を返す。
	•	一度にアップロードできる文書は t文書まで。
	•	対応ファイル形式: Word, Excel, PowerPoint, Markdown。

⸻

## 技術構成
	•	基盤: Google Cloud Compute Engine 上の Docker コンテナ群
	•	LLMレイヤ:
	•	PoC段階: Vertex AI (Gemini 1.5 Pro/Flash、用途に応じて使い分け)
	•	将来移行: LoRA調整済みモデルを H2O Studio で学習 → Ollama で社内GPU上にデプロイ
	•	オーケストレーション: Dify (Docker稼働)
	•	認証: FastAPIによる認証プロキシ（OIDC/SSO対応、将来のKeycloak/AD連携を想定）
	•	UI:
	•	PoC段階: Streamlitで簡易UI
	•	β以降: Vue.jsによる拡張性のあるUI
	•	公開: nginx による HTTPS 公開（社内CAまたはLet’s Encryptを使用）

⸻

## 開発タスク
	1.	レビュー観点の定義
	•	JSON形式を基本とし、課長/部長ごとの観点を整理。
	•	将来的に観点を追加可能なスキーマ設計。
	2.	固定プロンプト設計
	•	Difyにロール別プロンプトを登録。
	•	Vertex AI利用時は Pro/Flash を切替。
	3.	業界用語対応
	•	RAG用ベクトルDBに登録。
	•	初期は小規模用語集、β以降は部署全体→全社共通へ拡張。
	4.	文書処理
	•	各ファイル形式のテキスト抽出とチャンク化処理。
	•	大規模文書向けに埋め込みキャッシュを導入。
	5.	セキュリティと監査
	•	アップロードファイルは一時保存＋自動削除。
	•	ユーザー/日時/レビュー結果をログに保存。

⸻

## ロードマップ
	•	フェーズ0 (PoC): Vertex AI利用、Streamlit UI、サンプル用語集で検証。
	•	フェーズ1 (部署内β): Vue.js UI、FastAPI認証＋SSO、RAG強化、ログ管理。
	•	フェーズ2 (全社展開): LoRA済みモデルをOllamaに移行、全社用語DB、GPUスケールアウト、レビュー観点標準化。

⸻
